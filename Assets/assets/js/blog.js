// First, let's organize our blog posts into two separate arrays
const mainBlogPosts = [
  {
    id: 1,
    title: "Realta Top Digital Awards 2021",
    image: "assets/img/news/news1.jpg",
    imageAlt: "Realta Top Digital Awards 2021",
    date: "February 8, 2022",
    category: "Digital Transformation",
    lead: `Pandemi Covid-19 yang melanda seluruh dunia secara tidak langsung telah mempercepat perkembangan tranformasi digital. Di mana upaya untuk terus bertahan bagi para pelaku usaha selama masa pandemi adalah dengan terus berinovasi dan melakukan adaptasi.`,
    content: `<p>Hal inilah yang turut dilakukan oleh PT Realta Cakradharma selama masa pandemi Covid-19. Realta terus berusaha untuk bertahan dengan menjalankan operasional bisnisnya secara lebih baik dan terus melakukan inovasi terhadap kebutuhan-kebutuhan bisnis di masa pandemi.</p>

<p>Atas dedikasi PT Realta Cakradharma (Realta) dalam melakukan inovasi selama masa pandemi Covid-19 ini, Realta mendapatkan apresiasi dari ajang Top Digital Awards 2021 menjadi salah satu dari 50 pemenang pada kategori Top Digital Implementation 2021 on Business Solution Sector #Level Stars 4 dan Top Leader on Digital Implementation 2021.</p>

<h3>Penghargaan Bergengsi</h3>
<ul>
  <li>Top Digital Implementation 2021 on Business Solution Sector #Level Stars 4</li>
  <li>Top Leader on Digital Implementation 2021</li>
  <li>Penghargaan Tertinggi di bidang Teknologi Digital di Indonesia</li>
  <li>IT Maturity Level 4: Quantitatively Managed</li>
</ul>

<h3>Tantangan yang Dihadapi</h3>
<ul>
  <li>Adaptasi terhadap kondisi pandemi</li>
  <li>Implementasi sistem kerja hybrid</li>
  <li>Peningkatan layanan digital kepada klien</li>
  <li>Pengembangan solusi digital untuk berbagai industri</li>
</ul>

<p>Top Digital Awards merupakan kegiatan Pembelajaran dan Penghargaan Tertinggi di bidang Teknologi Digital (IT & TELCO) yang terbesar di Indonesia, yang diberikan kepada Perusahaan & Instansi Pemerintahan, sejak tahun 2016. Dengan tema Accelerating Digital Transformation in Business & Government di tahun 2021, diikuti oleh 900 perusahaan dan instansi pemerintahan. Penghargaan Top Digital Awards ini diberikan kepada Realta oleh majalah ItWorks yang bekerja sama dan didukung oleh beberapa Asosiasi dan Perusahaan Konsultan TI TELCO/ Digital, menjadi bukti nyata bahwa Realta sangat mendukung pemanfaatan teknologi digital di Indonesia.</p>

<h3>Solusi Unggulan</h3>
<p>Berdiri sejak tahun 1983 hingga sekarang, Realta telah mengembangkan solusi-solusi yang dapat mengakomodir berbagai sektor industri seperti untuk industri Hospitality, Property, Manufacturing dan lain sebagainya. Dari solusi-solusi yang dimiliki oleh Realta, terdapat 5 solusi unggulan yang terus dikembangkan selama masa pandemi ini, yaitu SIAP+P, BIMASAKTI, Rhapsody, Rhapsody Golf, RealPCR dan PASTI booking test untuk PCR.</p>`,


    featuredArticles: [
      {
        id: 2,
        title: "Chatbot: Solusi di Masa Pandemi COVID-19",
        image: "assets/img/news/news2.jpg",
        imageAlt: "Chatbot sebagai solusi di masa pandemi",
        date: "Friday, 15 March 2024 11:30",
        category: "Digital Transformation",
        type: "News",
        lead: "Pandemi COVID-19 membawa begitu banyak perubahan dan memicu para pelaku usaha untuk melakukan megashift digital. Chatbot menjadi salah satu solusi untuk membantu bisnis tetap berjalan di tengah keterbatasan.",
        content: `<p>Pandemi COVID-19 membawa begitu banyak perubahan. Perubahan mengenai apa yang harus digunakan dan dibawa pada saat keluar rumah dan proses bisnis perusahaan adalah beberapa contoh dari perubahan yang terjadi. Pandemi COVID-19 juga memicu para pelaku usaha untuk melakukan megashift digital. Megashift Digital merupakan merupakan perubahan besar-besaran ke platform digital. Hal ini bukan karena untuk menjadi lebih keren karena memiliki teknologi terbaru, melainkan dipicu karena tuntutan dan kebutuhan. Pelaku usaha harus tetap menjalankan bisnisnya meskipun dalam keadaan pandemi.</p>

<p>Hal ini juga berlaku pada Customer Service. Customer Service harus terus berjalan untuk melayani pelanggan. Meskipun tim Customer Service ada yang terkena COVID-19, pekerjaan mereka harus tetap berjalan. Tidak mungkin Customer Service berhenti karena ada yang terkena COVID-19. Hal ini adalah karena peran Customer Service adalah melayani pelanggan 24 jam. Jadi sekarang, Customer Service harus beralih ke layanan online dan otomatis agar dapat mengakomodasi pelanggan meskipun personel berkurang.</p>

<p>Di masa pandemi seperti ini, muncul juga tuntutan untuk tidak berkerumun saat melakukan training/sosialisasi mengenai aturan baru dan kebutuhan lainnya. HR wajib mencari cara untuk melakukan training dan sosialisasi tanpa membuat kerumunan dan efektif. Situasi sekarang membuat tim HR harus mengkoordinir training dan sosialisasi secara daring dan otomatis.</p>

<h3>Solusi untuk Customer Service</h3>
<p>Bagi tim Customer Service, bagaimana caranya untuk tetap melayani pelanggan di saat jumlah personel Customer Service berkurang/dikurangi karena terpapar COVID-19 atau kantor dalam keadaan tutup? Dengan chatbot di tim Customer Service, Chatbot dapat menjawab setiap pertanyaan-pertanyaan yang sudah biasa ditanyakan oleh pelanggan. Jadi chatbot dapat menjadi solusi instan di situasi jumlah personel Customer Service berkurang, personel Customer Service terpapar COVID-19, dan kantor dalam keadaan tutup.</p>

<h3>Solusi untuk Tim HRD</h3>
<p>Bagi tim HRD, ketika ada aturan baru, biasanya mereka akan melakukan sosialisasi ke karyawan dengan mengumpulkan mereka ke suatu ruangan tertentu. Hal ini sekarang tidak dimungkinkan lagi. Lalu bagaimana caranya HRD melakukan sosialisasi mengenai aturan Protokol Kesehatan terkait COVID-19? Dengan Chatbot di HRD, tim HRD dapat melakukan sosialisasi melalui Chatbot.</p>

<h3>Chatbot Realta</h3>
<p>Chatbot yang dibuat oleh PT. Realta Chakradarma memungkinkan pelaku bisnis dalam hal membantu mereka untuk mengotomatisasi proses-proses manual dan mengurangi intervensi manusia seperti di Business Operation untuk Training, Reporting, Data Entry by Voice, dan Minutes of Meeting. Konten khusus dapat mencakup Lifestyle, Weather, Al Quran, Kitab Suci, dan Chat-Chat. Untuk Customer Service dapat mencakup FAQ, Location & Direction, Survey & Feedback, Agent Request, dan Service Ticket.</p>`
      },
      {
        id: 3,
        title: "Proses Procurement yang Dapat Dilakukan Dimanapun dan Kapanpun",
        image: "assets/img/news/news3.jpg",
        imageAlt: "Digital Procurement Process",
        date: "Wednesday, 20 March 2024 13:45",
        category: "Technology Update",
        type: "Analysis",
        lead: "Pandemi COVID-19 memaksa bisnis untuk beradaptasi dengan cepat, termasuk dalam proses procurement yang kini harus dapat dilakukan secara digital dari mana saja dan kapan saja.",
        content: `<p>Akibat pandemi virus COVID-19 yang sedang berlangsung akhir-akhir ini, semua tatanan kehidupan menjadi berubah, salah satunya adalah pada proses bisnis. Dalam upaya untuk mencegah penularan COVID-19, tempat-tempat ramai ditutup, dan bisnis di berbagai sektor menjadi lesu. Perusahaan merumahkan karyawan mereka agar kantor tidak menjadi episentrum tempat penularan virus COVID-19. Karena perubahan-perubahan ini, perusahaan juga harus beradaptasi agar dapat bertahan dalam menjalankan usahanya.</p>

<p>Pandemi COVID-19 memaksa bisnis berevolusi dalam era Digital Megashifts, yang berarti bergeser ke dunia digital secara besar-besaran. Salah satu pergeseran yang harus dilakukan perusahaan agar dapat bertahan adalah dengan Go Digiware, yang berarti bahwa bisnis mengadopsi proses digital untuk aktivitas yang seharusnya atau yang sebelumnya dilakukan secara fisik. Salah satu contoh di mana proses tersebut bisa diimplementasikan adalah proses purchasing/ pembelian.</p>

<h3>Tantangan Proses Procurement di Masa Pandemi</h3>
<p>Proses pembelian diawali dengan mengundang vendor dan menyeleksinya. Proses seleksi diawali dengan kelengkapan persyaratan vendor, kompetensi atau kemampuan vendor dalam memenuhi requirement, hingga tender atau perbandingan harga. Sebelum COVID-19, proses ini dilakukan secara tatap muka. Akan tetapi karena COVID-19, orang-orang tidak lagi bisa bertatap muka dengan mudah. Agar proses pembelian tetap berjalan dengan lancar, perusahaan mau tidak mau harus migrasi kepada proses digital.</p>

<h3>Solusi N2N Systems dari Realta</h3>
<p>Realta Chakradarma memiliki solusi N2N systems yang dapat memampukan proses procurement untuk dilakukan di mana pun dan kapan pun. N2N systems menyediakan daftar vendor yang sesuai dengan kualifikasi & kompetensi, serta mampu melakukan proses tender dan penunjukkan secara online. Proses yang sebelumnya dilakukan oleh tim Purchasing secara fisik, semua dapat disediakan platformnya oleh Realta secara online.</p>`
      }
    ]
  }
];

const secondPageBlogPosts = [
  {
    id: "s",
    title: "The Rise of Fintech in Modern Banking",
    image: "assets/img/news/news11.png",
    imageAlt: "Fintech Revolution",
    date: "Tuesday, 9 April 2024 10:30",
    category: "Finance",
    lead: `Fintech innovations are revolutionizing the banking sector, with companies like Stripe and Square leading the charge. These technologies are transforming how financial services are delivered, promising increased efficiency and accessibility.`,
    content: `<p>Recent studies show that banks adopting fintech solutions report up to 40% faster transaction processing times, though questions about security and regulatory compliance remain at the forefront of industry discussions.</p>

<h3>Key Features of Fintech Revolution</h3>
<ul>
  <li>Seamless Digital Payments</li>
  <li>Enhanced Customer Experience</li>
  <li>AI-Driven Financial Insights</li>
  <li>Blockchain-Based Security</li>
</ul>

<h3>Major Challenges</h3>
<ul>
  <li>Regulatory Compliance</li>
  <li>Cybersecurity Threats</li>
  <li>Market Competition</li>
  <li>Technology Integration</li>
</ul>

<p>The adoption of fintech solutions marks a significant shift in banking practices. While these technologies offer unprecedented efficiency gains, they also raise important questions about data privacy and the future role of traditional banks.</p>

<h3>Future Outlook</h3>
<p>As fintech continues to evolve, it is likely to become an integral part of the modern financial landscape, fundamentally changing how banking services are delivered.</p>`,

    featuredArticles: [
      {
        id: 7,
        title: "Cryptocurrency: The New Frontier",
        image: "assets/img/news/news12.png",
        imageAlt: "Cryptocurrency",
        date: "Monday, 8 April 2024 14:20",
        category: "Finance",
        type: "Research",
        lead: "Cryptocurrencies are gaining traction as a viable alternative to traditional currencies, potentially reshaping global financial systems...",
        content: `<p>A growing number of investors are turning to cryptocurrencies as a hedge against inflation and economic instability...</p>`,
        features: [
          "Decentralized Transactions",
          "Global Accessibility",
          "Inflation Hedge",
          "Innovative Financial Products"
        ],
        challenges: [
          "Regulatory Uncertainty",
          "Market Volatility",
          "Security Risks",
          "Adoption Barriers"
        ],
        additionalParagraph: "The rise of cryptocurrencies could accelerate the shift towards a more decentralized financial system...",
        conclusion: "The implications for global finance and investment strategies are profound..."
      },
      {
        id: 8,
        title: "The Future of Digital Banking",
        image: "assets/img/news/news7.jpg",
        imageAlt: "Digital Banking",
        date: "Sunday, 7 April 2024 09:45",
        category: "Finance",
        type: "Analysis",
        lead: "Digital banking platforms are reshaping the financial landscape, promising a more user-friendly and efficient banking experience...",
        content: `<p>The evolution of digital banking continues to redefine how consumers interact with financial institutions...</p>`,
        features: [
          "User-Friendly Interfaces",
          "24/7 Accessibility",
          "Personalized Financial Services",
          "Cost-Effective Operations"
        ],
        challenges: [
          "Data Privacy Concerns",
          "Technological Disruptions",
          "Customer Trust",
          "Competitive Pressure"
        ],
        additionalParagraph: "Digital banking represents a fundamental shift in how financial services are accessed and managed...",
        conclusion: "The transition to digital banking could revolutionize consumer finance..."
      },
      {
        id: 9,
        title: "Sustainable Investing: A Growing Trend",
        image: "assets/img/news/news8.jpg",
        imageAlt: "Sustainable Investing",
        date: "Saturday, 6 April 2024 16:30",
        category: "Finance",
        type: "Report",
        lead: "Investors are increasingly focusing on sustainable investing, balancing financial returns with environmental and social impact...",
        content: `<p>The push for sustainable investing is gaining momentum as investors seek to align their portfolios with their values...</p>`,
        features: [
          "Environmental Impact",
          "Social Responsibility",
          "Long-Term Growth",
          "Ethical Governance"
        ],
        challenges: [
          "Performance Metrics",
          "Market Perception",
          "Regulatory Frameworks",
          "Investment Risks"
        ],
        additionalParagraph: "The move towards sustainable investing represents a crucial step in responsible finance...",
        conclusion: "Sustainable investing practices are becoming increasingly important..."
      },
      {
        id: 10,
        title: "The Evolution of Payment Systems",
        image: "assets/img/news/news10.png",
        imageAlt: "Payment Systems",
        date: "Friday, 5 April 2024 11:15",
        category: "Finance",
        type: "Technology",
        lead: "Payment systems are transforming how transactions are conducted, bringing efficiency and security to financial exchanges...",
        content: `<p>The rapid evolution of payment systems is enabling new possibilities in digital transactions and financial inclusion...</p>`,
        features: [
          "Instant Transactions",
          "Enhanced Security",
          "Cost Reduction",
          "Global Reach"
        ],
        challenges: [
          "Fraud Prevention",
          "Regulatory Compliance",
          "Technological Integration",
          "User Adoption"
        ],
        additionalParagraph: "Payment systems are becoming increasingly crucial for modern financial operations...",
        conclusion: "The future of finance lies increasingly in advanced payment systems..."
      }
    ]
  }
];

// Combine them for total count, but keep them separate for rendering (add "secondPageBlogPosts")
const totalBlogPosts = [...mainBlogPosts,];
const postsPerPage = 10; // Changed from 1 to 10 items per page
let currentPage = 1;

function renderBlogPosts() {
  const blogContainer = document.getElementById('blog-container');
  blogContainer.innerHTML = '';
  
  // Calculate start and end indices for current page
  const startIndex = (currentPage - 1) * postsPerPage;
  const endIndex = startIndex + postsPerPage;
  
  // Get posts for current page
  const currentPosts = totalBlogPosts.slice(startIndex, endIndex);
  
  // Render the current page's posts
  currentPosts.forEach(post => {
    const postElement = document.createElement('article');
    postElement.className = 'pb-4 blog-article';
    
    // Create the featured articles grid HTML
    const featuredArticlesHTML = post.featuredArticles ? `
      <div class="row mt-5 featured-articles-grid">
        ${post.featuredArticles.map((article, idx) => `
          <div class="col-12 col-md-6 mb-4">
            <div class="custom-blog-card">
              <div class="custom-blog-card__image-container" style="cursor: pointer;" onclick="window.location.href='article.html?id=${article.id}'">
                <div class="category-badge">${article.category}</div>
                <img src="${article.image}" class="custom-blog-card__image" alt="${article.imageAlt}">
                <div class="custom-blog-card__overlay"></div>
                <h5 class="custom-blog-card__title">${article.title}</h5>
              </div>
              <div class="custom-blog-card__content">
                <p class="custom-blog-card__text">${article.lead}</p>
                <div class="custom-blog-card__footer">
                  <div class="custom-blog-card__meta">
                    <span class="custom-blog-card__date">${formatDate(article.date)}</span>
                  </div>
                  <a href="article.html?id=${article.id}" class="custom-blog-card__read-more">
                    Read More
                  </a>
                </div>
              </div>
            </div>
          </div>
        `).join('')}
      </div>
    ` : '';

    postElement.innerHTML = `
      <div class="main-blog-post">
        <h2 class="display-5 link-body-emphasis mb-3">
          <a href="article.html?id=${post.id}" class="blog-post-title">${post.title}</a>
        </h2>
        <div class="blog-image-container position-relative overflow-hidden mb-4" style="cursor: pointer;" onclick="window.location.href='article.html?id=${post.id}'">
          <img src="${post.image}" alt="${post.title}" class="blog-image">
        </div>
        <div class="blog-post-content">
          <p class="blog-meta mb-3">${formatDate(post.date)} in <span class="blog-category">${post.category}</span></p>
          <p class="blog-lead mb-4">${post.lead}</p>
          ${post.content ? `<div class="blog-full-content mb-4">${post.content}</div>` : ''}
          <div class="text-end mt-4">
            <a href="article.html?id=${post.id}" class="blog-btn">
              <span class="circle"></span>
              <span class="text">Read Full Article</span>
              <svg class="arr-1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"/>
              </svg>
              <svg class="arr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
      ${featuredArticlesHTML}
    `;
    blogContainer.appendChild(postElement);
  });

  // Update pagination
  const totalPages = Math.ceil(totalBlogPosts.length / postsPerPage);
  const paginationElement = document.createElement('div');
  paginationElement.className = 'blog-pagination-container mt-0';
  paginationElement.innerHTML = `
    <div class="pagination-wrapper">
      <button class="pagination-btn prev-btn ${currentPage === 1 ? 'disabled' : ''}" 
              onclick="previousPage(event)" ${currentPage === 1 ? 'disabled' : ''}>
        <i class="fas fa-chevron-left"></i>
      </button>
      
      <div class="pagination-numbers">
        ${Array.from({length: totalPages}, (_, i) => i + 1)
          .map(num => `
            <button class="pagination-number ${num === currentPage ? 'active' : ''}"
                    onclick="goToPage(${num})">
              ${num}
            </button>
          `).join('')}
      </div>
      
      <button class="pagination-btn next-btn ${currentPage === totalPages ? 'disabled' : ''}" 
              onclick="nextPage(event)" ${currentPage === totalPages ? 'disabled' : ''}>
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
    <div class="pagination-info">
      Page ${currentPage} of ${totalPages}
    </div>
  `;
  
  blogContainer.appendChild(paginationElement);
}

// Update navigation functions
function goToPage(page) {
  currentPage = page;
  renderBlogPosts();
}

function previousPage(event) {
  // Prevent default behavior
  event.preventDefault();
  if (currentPage > 1) {
    currentPage--;
    renderBlogPosts();
  }
}

function nextPage(event) {
  // Prevent default behavior
  event.preventDefault();
  const totalPages = Math.ceil(totalBlogPosts.length / postsPerPage);
  if (currentPage < totalPages) {
    currentPage++;
    renderBlogPosts();
  }
}

// Initial render
document.addEventListener('DOMContentLoaded', function() {
  currentPage = 1;
  renderBlogPosts();
  renderCategories();
  setupCategoryClickHandlers();
});

function createExcerpt(element, lines) {
  const lineHeight = parseInt(window.getComputedStyle(element).lineHeight);
  const maxHeight = lineHeight * lines;
  const originalContent = element.textContent;

  if (element.offsetHeight <= maxHeight) {
    return; // Full text fits within specified lines
  }

  // Binary search to find the right amount of text
  let low = 0;
  let high = originalContent.length;
  
  while (low < high) {
    const mid = Math.floor((low + high) / 2);
    element.textContent = originalContent.slice(0, mid) + '...';
    
    if (element.offsetHeight > maxHeight) {
      high = mid;
    } else {
      low = mid + 1;
    }
  }

  // Find the last complete sentence
  let lastSentenceEnd = originalContent.slice(0, low).lastIndexOf('.');
  if (lastSentenceEnd === -1 || lastSentenceEnd < low / 2) {
    // If no sentence end found or it's too short, find last complete word
    lastSentenceEnd = originalContent.slice(0, low).lastIndexOf(' ');
  }

  // Set the final excerpt
  if (lastSentenceEnd !== -1) {
    element.textContent = originalContent.slice(0, lastSentenceEnd + 1) + '...';
  } else {
    element.textContent = originalContent.slice(0, low) + '...';
  }

  // Ensure we haven't exceeded the height limit
  while (element.offsetHeight > maxHeight && element.textContent.length > 3) {
    element.textContent = element.textContent.slice(0, -4) + '...';
  }
}

// STICKY

document.addEventListener('DOMContentLoaded', function () {
  const stickyElement = document.querySelector('.position-sticky');
  const stickyTop = stickyElement.offsetTop;

  window.addEventListener('scroll', function () {
    if (window.pageYOffset > stickyTop) {
      stickyElement.style.position = 'fixed';
      stickyElement.style.top = '2rem';
    } else {
      stickyElement.style.position = 'static';
    }
  });
});

// Function to render categories
function renderCategories() {
  const categoriesContainer = document.querySelector('.categories-container .category-list');
  if (!categoriesContainer) return;

  const categories = calculateCategories();
  
  categoriesContainer.innerHTML = categories.map(({category, count}) => `
    <div class="category-card">
      <div class="category-icon">
        <i class="fas fa-tags"></i>
      </div>
      <div class="category-content">
        <h5 class="category-title">${category}</h5>
        <span class="category-count">${count} article${count !== 1 ? 's' : ''}</span>
      </div>
    </div>
  `).join('');
  
  setupCategoryClickHandlers();
}

// Simplified category calculation function - removed icon mapping
function calculateCategories() {
  const allArticles = totalBlogPosts.flatMap(post => [
    post,
    ...(post.featuredArticles || [])
  ]);
  
  const categoryCount = allArticles.reduce((acc, article) => {
    const category = article.category;
    acc[category] = (acc[category] || 0) + 1;
    return acc;
  }, {});
  
  return Object.entries(categoryCount).map(([category, count]) => ({
    category,
    count
  }));
}

// Add click event handler for category cards
function setupCategoryClickHandlers() {
  const categoryCards = document.querySelectorAll('.category-card');
  categoryCards.forEach(card => {
    card.addEventListener('click', function() {
      const selectedCategory = this.querySelector('.category-title').textContent;
      filterPostsByCategory(selectedCategory);
    });
  });
}

// Function to filter and display posts by category
function filterPostsByCategory(category) {
  const blogContainer = document.getElementById('blog-container');
  
  const latestPostTitles = document.querySelectorAll('.latest-post-title');
  const allArticles = totalBlogPosts.flatMap(post => [
    post,
    ...(post.featuredArticles || [])
  ]);
  
  // Filter articles by selected category
  const filteredArticles = allArticles.filter(article => article.category === category);
  
  // Hide ALL "Latest Posts" titles when showing filtered results
  latestPostTitles.forEach(title => {
    if (!title.closest('.category-header')) { // Don't hide if it's inside category header
      title.style.display = 'none';
    }
  });
  
  // Update the blog container title and content
  const containerHTML = `
    <div class="category-header mb-4">
      <div class="d-flex justify-content-between align-items-center">
        <h2 class="latest-post-title pb-4 mb-0">
          ${category} Articles
        </h2>
        <button class="clear-filter-btn d-flex align-items-center" onclick="clearFilter()">
          <i class="fas fa-times-circle"></i>
          <span>Clear filter</span>
        </button>
      </div>
    </div>
    <div class="row g-4">
      ${filteredArticles.map(post => `
        <div class="col-md-6">
          <div class="category-post-card">
            <div class="category-post-image" style="cursor: pointer;" onclick="window.location.href='article.html?id=${post.id}'">
              <img src="${post.image}" alt="${post.title}">
              <div class="category-post-overlay"></div>
              <div class="category-badge-fixed">${post.category.toUpperCase()}</div>
            </div>
            <div class="category-post-content">
              <div class="category-post-header">
                <span class="category-post-date">${formatDate(post.date)}</span>
              </div>
              <div class="category-post-body">
                <h3 class="category-post-title">${post.title}</h3>
                <p class="category-post-excerpt">${post.lead.split('<br>')[0].substring(0, 100)}...</p>
              </div>
              <div class="category-post-footer">
                <a href="article.html?id=${post.id}" class="category-post-link">
                  Read More <i class="fas fa-arrow-right"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      `).join('')}
    </div>
  `;
  
  blogContainer.innerHTML = containerHTML;
}

// Update the clearFilter function
function clearFilter() {
  const latestPostTitles = document.querySelectorAll('.latest-post-title');
  latestPostTitles.forEach(title => {
    title.style.display = 'inline-block'; // Changed from 'block' to 'inline-block'
    // Reset any potentially modified styles
    title.style.width = 'auto';
    title.style.position = 'relative';
  });
  
  // Add a small delay before re-rendering to ensure styles are properly reset
  setTimeout(() => {
    renderBlogPosts();
  }, 50);
}
// Update the CSS styles for better consistency
const categoryStyle = document.createElement('style');
categoryStyle.textContent = `
  .category-post-card {
    display: flex;
    flex-direction: column;
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    height: 100%;
  }

  .category-post-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
  }

  .category-post-image {
    position: relative;
    height: 200px;
    overflow: hidden;
    flex-shrink: 0;
  }

  .category-post-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .category-post-card:hover .category-post-image img {
    transform: scale(1.1);
  }

  .category-post-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.4) 100%);
  }

  .category-post-content {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    padding: 1.5rem;
  }

  .category-post-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .category-post-date {
    font-size: 0.85rem;
    color: #666;
  }

  .category-badge {
    background-color: #7209d4;
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
  }

  .category-post-body {
    flex-grow: 1;
    margin-bottom: 1rem;
  }

  .category-post-title {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    line-height: 1.4;
    color: #333;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .category-post-excerpt {
    font-size: 0.9rem;
    color: #666;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    margin-bottom: 0;
  }

  .category-post-footer {
    margin-top: auto;
    padding-top: 1rem;
    border-top: 1px solid #eee;
  }

  .category-post-link {
    color: #7209d4;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: gap 0.3s ease;
  }

  .category-post-link:hover {
    gap: 0.8rem;
    color: #5a07a8;
  }

  /* Dark mode styles */
  body.dark-mode .category-post-card {
    background: #2d2d2d;
  }

  body.dark-mode .category-post-title {
    color: #fff;
  }

  body.dark-mode .category-post-excerpt,
  body.dark-mode .category-post-date {
    color: #aaa;
  }

  body.dark-mode .category-badge {
    background-color: #b388ff;
    color: white;
  }

  body.dark-mode .category-post-footer {
    border-top-color: #444;
  }

  body.dark-mode .category-post-link {
    color: #b388ff;
  }

  body.dark-mode .category-post-link:hover {
    color: #9b6dff;
  }

  .clear-filter-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border: none;
    background: transparent;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  @media (max-width: 768px) {
    .clear-filter-btn {
      min-width: 130px;
    }
  }

  .clear-filter-btn i {
    color: #dc3545;
    font-size: 1.2rem;
    transition: color 0.3s ease;
  }

  .clear-filter-btn span {
    color: #ff4444;
    font-size: 0.95rem;
    font-weight: 500;
    transition: color 0.3s ease;
  }

  .clear-filter-btn:hover {
    background-color: #ff44441a;
  }

  .clear-filter-btn:hover i {
    color: #c82333;
  }

  .clear-filter-btn:hover span {
    color: #c82333;
  }

  body.dark-mode .clear-filter-btn i {
    color: #ff4d4d;
  }

  body.dark-mode .clear-filter-btn span {
    color: #ff6b6b;
  }

  body.dark-mode .clear-filter-btn:hover {
    background-color: #ff6b6b1a;
  }

  body.dark-mode .clear-filter-btn:hover i,
  body.dark-mode .clear-filter-btn:hover span {
    color: #ff8585;
  }

  /* Add these new styles */
  .latest-post-title {
    display: inline-block;
    position: relative;
    width: auto;
  }



  /* Dark mode adjustments */
  body.dark-mode .latest-post-title::after {
    background: linear-gradient(90deg, #b388ff, #4b5eff 33%, #00d5e6);
  }

  .category-header .d-flex {
    min-height: 60px;
  }

  .clear-filter-btn {
    height: fit-content;
    margin-bottom: 1rem;
  }

  .latest-post-title {
    margin: 0;
    line-height: 1.5;
  }

  .latest-post-title::after {
    bottom: -5px;
  }

  .category-badge-fixed {
    position: absolute;
    top: 15px;
    left: 15px;
    background-color: #7209d494 !important;
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    z-index: 2;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }

  body.dark-mode .category-badge-fixed {
    background-color: #7209d494 !important;
    color: white;
  }

  .category-post-card:hover .category-badge {
    display: none;
  }

  .category-post-image {
    position: relative;
    height: 200px;
    overflow: hidden;
    flex-shrink: 0;
  }

  .category-post-overlay {
    z-index: 1;
  }
`;
document.head.appendChild(categoryStyle);

// Update the title styles
const titleStyle = document.createElement('style');
titleStyle.textContent = `
  .blog-post-title {
    color: #6a11cb !important;
    cursor: pointer;
    transition: opacity 0.3s ease;
    display: inline-block;
  }

  .blog-post-title:hover {
    opacity: 0.8;
  }

  .featured-title {
    color: #6a11cb !important;
    cursor: pointer;
    transition: opacity 0.3s ease;
  }

  .featured-title:hover {
    opacity: 0.8;
  }

  body.dark-mode .blog-post-title,
  body.dark-mode .featured-title {
    color: #6a11cb !important;
  }
`;
document.head.appendChild(titleStyle);

window.blogData = {
  mainBlogPosts,
  secondPageBlogPosts
};

// Add standardized date formatting function
function formatDate(dateStr) {
  const date = new Date(dateStr);
  const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
  const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
  
  const dayOfWeek = days[date.getDay()];
  const dayOfMonth = date.getDate();
  const month = months[date.getMonth()];
  const year = date.getFullYear();
  
  return `${dayOfWeek} ${dayOfMonth}, ${month} ${year}`;
}

// Update the styles to match article-column
const blogStyle = document.createElement('style');
blogStyle.textContent = `
  .blog-meta {
    font-family: 'Proxima Nova', sans-serif;
    color: #6c757d;
    font-size: 0.9rem;
  }

  .blog-category {
    color: #6a11cb;
    transition: color 0.3s ease;
  }

  .blog-category:hover {
    color: #7a4bd7;
  }

  body.dark-mode .blog-meta {
    color: #a0aec0;
  }

  body.dark-mode .blog-category {
    color: #9054d0;
  }
`;
document.head.appendChild(blogStyle);

